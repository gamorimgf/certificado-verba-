<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Certificado de Verba - Grupo Fleury</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- TELA DE LOGIN -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <div class="logo-container">
                    <div class="logo-icon">ğŸ¥</div>
                    <h1>Grupo Fleury</h1>
                </div>
                <h2>Sistema de Certificado de Verba</h2>
                <p class="subtitle">GestÃ£o de Centros de Custo</p>
            </div>
            
            <div class="access-section">
                <div class="access-icon">ğŸ”’</div>
                <p>Acesso ao Sistema</p>
            </div>
            
            <form id="formLogin" class="login-form" onsubmit="return false;">
                <div class="input-group">
                    <label for="matricula">
                        <span class="input-icon">ğŸ“„</span>
                        MatrÃ­cula:
                    </label>
                    <input type="text" id="matricula" placeholder="Digite sua matrÃ­cula" required autocomplete="username">
                </div>
                
                <div class="input-group">
                    <label for="senha">
                        <span class="input-icon">ğŸ”‘</span>
                        Senha:
                    </label>
                    <input type="password" id="senha" placeholder="Digite sua senha" required autocomplete="current-password">
                </div>
                
                <div id="loginStatus" class="login-status"></div>
                
                <button type="button" onclick="fazerLogin()" class="login-button">
                    <span class="button-icon">ğŸš€</span>
                    Entrar no Sistema
                </button>
            </form>
            
            <div class="login-footer">
                <p>Â© 2025 Grupo Fleury - Todos os direitos reservados</p>
            </div>
        </div>
    </div>

    <!-- SISTEMA PRINCIPAL -->
    <div id="mainSystem" class="main-system" style="display: none;">
        <!-- CABEÃ‡ALHO COM MENU -->
        <div class="header-system">
            <div class="header-left">
                <div class="system-logo">
                    <span class="logo-icon">ğŸ“Š</span>
                    <div>
                        <h1>Certificado de Verba</h1>
                        <span class="system-subtitle">Grupo Fleury</span>
                    </div>
                </div>
            </div>
            <div class="header-center">
                <div id="userInfo" class="user-info"></div>
            </div>
            <div class="header-right">
                <button id="btnPainel" onclick="abrirPainel()" class="btn btn-admin" style="display: none;">
                    âš™ï¸ Painel Admin
                </button>
                <button onclick="fazerLogout()" class="btn btn-logout">
                    ğŸšª Sair
                </button>
            </div>
        </div>

        <!-- ÃREA PRINCIPAL DO USUÃRIO -->
        <div id="areaUsuario" class="container">
            
           <!-- ÃREA DE FILTROS -->
<div class="filtros-section">
    <h3>ğŸ” Filtros de SeleÃ§Ã£o MÃºltipla</h3>
    
    <div class="filtro-grupo">
        <div class="checkbox-container">
            <input type="checkbox" id="usarN2">
            <label for="usarN2">ğŸ“Š Filtrar por Diretoria/Marca (N2)</label>
        </div>
        <div class="filtro-multiplo" id="containerN2" style="display: none;">
            <div class="filtro-header">
                <span class="filtro-contador" id="contadorN2">0 selecionados</span>
                <div class="filtro-acoes">
                    <button type="button" onclick="selecionarTodosN2()" class="btn-mini btn-success">âœ… Todos</button>
                    <button type="button" onclick="limparTodosN2()" class="btn-mini btn-warning">âŒ Limpar</button>
                </div>
            </div>
            <div class="filtro-lista" id="listaN2">
                <p>Carregando opÃ§Ãµes...</p>
            </div>
        </div>
    </div>

    <div class="filtro-grupo">
        <div class="checkbox-container">
            <input type="checkbox" id="usarN3">
            <label for="usarN3">ğŸ¢ Filtrar por GerÃªncia (N3)</label>
        </div>
        <div class="filtro-multiplo" id="containerN3" style="display: none;">
            <div class="filtro-header">
                <span class="filtro-contador" id="contadorN3">0 selecionados</span>
                <div class="filtro-acoes">
                    <button type="button" onclick="selecionarTodosN3()" class="btn-mini btn-success">âœ… Todos</button>
                    <button type="button" onclick="limparTodosN3()" class="btn-mini btn-warning">âŒ Limpar</button>
                </div>
            </div>
            <div class="filtro-lista" id="listaN3">
                <p>Carregando opÃ§Ãµes...</p>
            </div>
        </div>
    </div>

    <div class="filtro-grupo">
        <div class="checkbox-container">
            <input type="checkbox" id="usarCC">
            <label for="usarCC">ğŸ’¼ Filtrar por Centro de Custo</label>
        </div>
        <div class="filtro-multiplo" id="containerCC" style="display: none;">
            <div class="filtro-header">
                <span class="filtro-contador" id="contadorCC">0 selecionados</span>
                <div class="filtro-acoes">
                    <button type="button" onclick="selecionarTodosCC()" class="btn-mini btn-success">âœ… Todos</button>
                    <button type="button" onclick="limparTodosCC()" class="btn-mini btn-warning">âŒ Limpar</button>
                </div>
            </div>
            <div class="filtro-lista" id="listaCC">
                <p>Carregando opÃ§Ãµes...</p>
            </div>
        </div>
    </div>

    <div class="botoes-acao">
        <button onclick="aplicarFiltros()" class="btn btn-success">âœ… Aplicar Filtros</button>
        <button onclick="limparFiltros()" class="btn btn-warning">ğŸ—‘ï¸ Limpar Filtros</button>
    </div>
</div>

            <!-- ÃREA DE RESULTADOS -->
            <div class="resultados-section">
                <h3>ğŸ“‹ Centros de Custo Selecionados</h3>
                <div id="listaCentros">
                    <p style="text-align: center; color: #6c757d;">ğŸ‘† Use os filtros acima para selecionar centros</p>
                </div>
                
                <div class="total-section">
                    <h4>ğŸ’° Valor Total: R\$ <span id="valorTotal">0,00</span></h4>
                    <button id="botaoGerar" onclick="gerarPDF()" class="btn btn-primary" disabled>ğŸ“„ Gerar Certificado PDF</button>
                </div>
            </div>
        </div>

        <!-- PAINEL ADMINISTRATIVO -->
        <div id="painelAdmin" class="painel-admin" style="display: none;">
            <div class="painel-container">
                <div class="painel-header">
                    <h2>âš™ï¸ Painel Administrativo</h2>
                    <button onclick="fecharPainel()" class="btn btn-secondary">âœ–ï¸ Fechar</button>
                </div>
                
                <div class="painel-tabs">
                    <button onclick="abrirTab('tabDados')" class="tab-btn active" id="btnTabDados">ğŸ“Š GestÃ£o de Dados</button>
                    <button onclick="abrirTab('tabUsuarios')" class="tab-btn" id="btnTabUsuarios">ğŸ‘¥ GestÃ£o de UsuÃ¡rios</button>
                </div>

                <!-- TAB GESTÃƒO DE DADOS -->
                <div id="tabDados" class="tab-content active">
                    <h3>ğŸ“Š Upload de Dados CSV</h3>
                    
                    <div class="upload-section-admin">
                        <div class="upload-area" id="uploadAreaAdmin">
                            <div class="upload-content">
                                <div class="upload-icon">ğŸ“‹</div>
                                <p><strong>Clique aqui ou arraste o arquivo CSV de dados</strong></p>
                                <p class="upload-hint">Colunas: N1, N2, N3, N4, N5, Centro de custo, Valor</p>
                                <input type="file" id="fileInputDados" accept=".csv" style="display: none;">
                            </div>
                        </div>
                        <div class="upload-status" id="uploadStatusDados"></div>
                        <div class="upload-actions">
                            <button onclick="selecionarArquivoDados()" class="btn btn-primary">ğŸ“ Selecionar Arquivo</button>
                            <button onclick="usarDadosDemo()" class="btn btn-secondary">ğŸ§ª Carregar Dados Demo</button>
                        </div>
                    </div>

                    <div class="dados-info" id="dadosInfo">
                        <h4>ğŸ“ˆ EstatÃ­sticas dos Dados Atuais</h4>
                        <div id="estatisticasDados">Nenhum dado carregado</div>
                    </div>
                </div>

                <!-- TAB GESTÃƒO DE USUÃRIOS -->
                <div id="tabUsuarios" class="tab-content">
                    <h3>ğŸ‘¥ GestÃ£o de UsuÃ¡rios</h3>
                    
                    <div class="usuarios-upload">
                        <h4>ğŸ“¤ Upload de UsuÃ¡rios CSV</h4>
                        <div class="upload-area-small" id="uploadAreaUsuarios">
                            <div class="upload-content">
                                <div class="upload-icon">ğŸ‘¥</div>
                                <p><strong>Arquivo CSV de usuÃ¡rios</strong></p>
                                <p class="upload-hint">Colunas: Matricula, Nome, Senha, Perfil</p>
                                <input type="file" id="fileInputUsuarios" accept=".csv" style="display: none;">
                            </div>
                        </div>
                        <div class="upload-status" id="uploadStatusUsuarios"></div>
                        <button onclick="selecionarArquivoUsuarios()" class="btn btn-primary">ğŸ“¤ Upload UsuÃ¡rios</button>
                        <button onclick="baixarTemplateUsuarios()" class="btn btn-info">ğŸ“¥ Baixar Template</button>
                    </div>

                    <div class="usuarios-lista">
                        <h4>ğŸ“‹ Lista de UsuÃ¡rios</h4>
                        <div class="usuarios-actions">
                            <button onclick="adicionarUsuario()" class="btn btn-success">â• Adicionar UsuÃ¡rio</button>
                            <button onclick="atualizarListaUsuarios()" class="btn btn-info">ğŸ”„ Atualizar Lista</button>
                        </div>
                        <div id="listaUsuarios" class="usuarios-table"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ADICIONAR/EDITAR USUÃRIO -->
    <div id="modalUsuario" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitulo">â• Adicionar UsuÃ¡rio</h3>
                <button onclick="fecharModalUsuario()" class="btn-close">âœ–ï¸</button>
            </div>
            <div class="modal-body">
                <form id="formUsuario" onsubmit="return false;">
                    <input type="hidden" id="usuarioId">
                    
                    <div class="input-group">
                        <label for="usuarioMatricula">ğŸ“‹ MatrÃ­cula:</label>
                        <input type="text" id="usuarioMatricula" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="usuarioNome">ğŸ‘¤ Nome:</label>
                        <input type="text" id="usuarioNome" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="usuarioSenha">ğŸ”‘ Senha:</label>
                        <input type="password" id="usuarioSenha" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="usuarioPerfil">ğŸ‘¥ Perfil:</label>
                        <select id="usuarioPerfil" required>
                            <option value="">Selecione o perfil</option>
                            <option value="admin">ğŸ‘¨â€ğŸ’¼ Administrador</option>
                            <option value="user">ğŸ‘¤ UsuÃ¡rio</option>
                        </select>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" onclick="salvarUsuario()" class="btn btn-success">ğŸ’¾ Salvar</button>
                        <button type="button" onclick="fecharModalUsuario()" class="btn btn-secondary">âŒ Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- BIBLIOTECAS -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
