<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Certificado de Verba - Grupo Fleury</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- TELA DE LOGIN -->
    <div id="loginScreen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <div class="logo-container">
                   <img src="data:image/png;base64,data:image/png;base64,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" alt="Logo Grupo Fleury" class="system-logo-img">
                    <h1>Grupo Fleury</h1>
                </div>
                <h2>Sistema de Certificado de Verba</h2>
                <p class="subtitle">GestÃ£o de Centros de Custo</p>
            </div>
            
            <div class="access-section">
                <div class="access-icon">ğŸ”’</div>
                <p>Acesso ao Sistema</p>
            </div>
            
            <form id="formLogin" class="login-form" onsubmit="return false;">
                <div class="input-group">
                    <label for="matricula">
                        <span class="input-icon">ğŸ“„</span>
                       Login:
                    </label>
                    <input type="text" id="matricula" placeholder="Digite sua matrÃ­cula" required autocomplete="username">
                </div>
                
                <div class="input-group">
                    <label for="senha">
                        <span class="input-icon">ğŸ”‘</span>
                        Senha:
                    </label>
                    <input type="password" id="senha" placeholder="Digite sua senha" required autocomplete="current-password">
                </div>
                
                <div id="loginStatus" class="login-status"></div>
                
                <button type="button" onclick="fazerLogin()" class="login-button">
                    <span class="button-icon">ğŸš€</span>
                    Entrar no Sistema
                </button>
            </form>
            
            <div class="login-footer">
                <p>Â© 2024 Grupo Fleury - Todos os direitos reservados</p>
            </div>
        </div>
    </div>

    <!-- SISTEMA PRINCIPAL -->
    <div id="mainSystem" class="main-system" style="display: none;">
        <!-- CABEÃ‡ALHO COM MENU -->
        <div class="header-system">
            <div class="header-left">
                <div class="system-logo">
                    <img src="https://cdn-sites-assets.mziq.com/wp-content/uploads/sites/1247/2023/06/Logo.png" alt="Logo Grupo Fleury" class="system-logo-img">
                    <div>
                        <h1>Certificado de Verba</h1>
                        <span class="system-subtitle">Grupo Fleury</span>
                    </div>
                </div>
            </div>
            <div class="header-center">
                <div id="userInfo" class="user-info"></div>
            </div>
            <div class="header-right">
                <button id="btnPainel" onclick="abrirPainel()" class="btn btn-admin" style="display: none;">
                    âš™ï¸ Painel Admin
                </button>
                <button onclick="fazerLogout()" class="btn btn-logout">
                    ğŸšª Sair
                </button>
            </div>
        </div>

        <!-- ÃREA PRINCIPAL DO USUÃRIO -->
        <div id="areaUsuario" class="container">
            <!-- ÃREA DE FILTROS -->
            <div class="filtros-section">
                <h3>ğŸ” Filtros de SeleÃ§Ã£o MÃºltipla</h3>
                
                <div class="filtro-grupo">
                    <div class="checkbox-container">
                        <input type="checkbox" id="usarN2">
                        <label for="usarN2">ğŸ“Š Filtrar por Diretoria/Marca (N2)</label>
                    </div>
                    <div class="filtro-multiplo" id="containerN2" style="display: none;">
                        <div class="filtro-header">
                            <span class="filtro-contador" id="contadorN2">0 selecionados</span>
                            <div class="filtro-acoes">
                                <button type="button" onclick="selecionarTodosN2()" class="btn-mini btn-success">âœ… Todos</button>
                                <button type="button" onclick="limparTodosN2()" class="btn-mini btn-warning">âŒ Limpar</button>
                            </div>
                        </div>
                        <div class="filtro-lista" id="listaN2">
                            <p>Carregando opÃ§Ãµes...</p>
                        </div>
                    </div>
                </div>

                <div class="filtro-grupo">
                    <div class="checkbox-container">
                        <input type="checkbox" id="usarN3">
                        <label for="usarN3">ğŸ¢ Filtrar por GerÃªncia (N3)</label>
                    </div>
                    <div class="filtro-multiplo" id="containerN3" style="display: none;">
                        <div class="filtro-header">
                            <span class="filtro-contador" id="contadorN3">0 selecionados</span>
                            <div class="filtro-acoes">
                                <button type="button" onclick="selecionarTodosN3()" class="btn-mini btn-success">âœ… Todos</button>
                                <button type="button" onclick="limparTodosN3()" class="btn-mini btn-warning">âŒ Limpar</button>
                            </div>
                        </div>
                        <div class="filtro-lista" id="listaN3">
                            <p>Carregando opÃ§Ãµes...</p>
                        </div>
                    </div>
                </div>

                <div class="filtro-grupo">
                    <div class="checkbox-container">
                        <input type="checkbox" id="usarCC">
                        <label for="usarCC">ğŸ’¼ Filtrar por Centro de Custo</label>
                    </div>
                    <div class="filtro-multiplo" id="containerCC" style="display: none;">
                        <div class="filtro-header">
                            <span class="filtro-contador" id="contadorCC">0 selecionados</span>
                            <div class="filtro-acoes">
                                <button type="button" onclick="selecionarTodosCC()" class="btn-mini btn-success">âœ… Todos</button>
                                <button type="button" onclick="limparTodosCC()" class="btn-mini btn-warning">âŒ Limpar</button>
                            </div>
                        </div>
                        <div class="filtro-lista" id="listaCC">
                            <p>Carregando opÃ§Ãµes...</p>
                        </div>
                    </div>
                </div>

                <div class="botoes-acao">
                    <button onclick="aplicarFiltros()" class="btn btn-success">âœ… Aplicar Filtros</button>
                    <button onclick="limparFiltros()" class="btn btn-warning">ğŸ—‘ï¸ Limpar Filtros</button>
                </div>
            </div>

            <!-- ÃREA DE RESULTADOS -->
            <div class="resultados-section">
                <h3>ğŸ“‹ Centros de Custo Selecionados</h3>
                <div id="listaCentros">
                    <p style="text-align: center; color: #6c757d;">ğŸ‘† Use os filtros acima para selecionar centros</p>
                </div>
                
                <div class="total-section">
                    <h4>ğŸ’° Valor Total: R\$ <span id="valorTotal">0,00</span></h4>
                    <button id="botaoGerar" onclick="gerarPDF()" class="btn btn-primary" disabled>ğŸ“„ Gerar Certificado PDF</button>
                </div>
            </div>
        </div>

        <!-- PAINEL ADMINISTRATIVO -->
        <div id="painelAdmin" class="painel-admin" style="display: none;">
            <div class="painel-container">
                <div class="painel-header">
                    <h2>âš™ï¸ Painel Administrativo</h2>
                    <button onclick="fecharPainel()" class="btn btn-secondary">âœ–ï¸ Fechar</button>
                </div>
                
                <div class="painel-tabs">
                    <button onclick="abrirTab('tabDados')" class="tab-btn active" id="btnTabDados">ğŸ“Š GestÃ£o de Dados</button>
                    <button onclick="abrirTab('tabUsuarios')" class="tab-btn" id="btnTabUsuarios">ğŸ‘¥ GestÃ£o de UsuÃ¡rios</button>
                </div>

                <!-- TAB GESTÃƒO DE DADOS -->
                <div id="tabDados" class="tab-content active">
                    <h3>ğŸ“Š Upload de Dados CSV (para visualizaÃ§Ã£o local)</h3>
                    <div class="upload-section-admin">
                        <div class="upload-area" id="uploadAreaAdmin">
                            <div class="upload-content">
                                <div class="upload-icon">ğŸ“‹</div>
                                <p><strong>Clique aqui ou arraste o arquivo CSV de dados</strong></p>
                                <p class="upload-hint">Colunas: N1, N2, N3, N4, N5, Centro de custo, Valor</p>
                                <p class="upload-hint">âš ï¸ Para persistir, atualize **dados_centros.csv** no GitHub.</p>
                                <input type="file" id="fileInputDados" accept=".csv" style="display: none;">
                            </div>
                        </div>
                        <div class="upload-status" id="uploadStatusDados"></div>
                        <div class="upload-actions">
                            <button onclick="selecionarArquivoDados()" class="btn btn-primary">ğŸ“ Carregar Local</button>
                            <button onclick="usarDadosDemo()" class="btn btn-secondary">ğŸ§ª Carregar Dados Demo</button>
                        </div>
                    </div>

                    <div class="dados-info" id="dadosInfo">
                        <h4>ğŸ“ˆ EstatÃ­sticas dos Dados Atuais</h4>
                        <div id="estatisticasDados">Nenhum dado carregado</div>
                    </div>
                </div>

                <!-- TAB GESTÃƒO DE USUÃRIOS -->
                <div id="tabUsuarios" class="tab-content">
                    <h3>ğŸ‘¥ GestÃ£o de UsuÃ¡rios (atualizaÃ§Ã£o via GitHub)</h3>
                    
                    <div class="usuarios-upload">
                        <h4>ğŸ“¤ Carregar UsuÃ¡rios CSV (para visualizaÃ§Ã£o local)</h4>
                        <div class="upload-area-small" id="uploadAreaUsuarios">
                            <div class="upload-content">
                                <div class="upload-icon">ğŸ‘¥</div>
                                <p><strong>Arquivo CSV de usuÃ¡rios</strong></p>
                                <p class="upload-hint">Colunas: Matricula, Nome, Senha, Perfil</p>
                                <p class="upload-hint">âš ï¸ Para persistir, atualize **usuarios.csv** no GitHub.</p>
                                <input type="file" id="fileInputUsuarios" accept=".csv" style="display: none;">
                            </div>
                        </div>
                        <div class="upload-status" id="uploadStatusUsuarios"></div>
                        <button onclick="selecionarArquivoUsuarios()" class="btn btn-primary">ğŸ“ Carregar Local</button>
                        <button onclick="baixarTemplateUsuarios()" class="btn btn-info">ğŸ“¥ Baixar Template</button>
                    </div>

                    <div class="usuarios-lista">
                        <h4>ğŸ“‹ Lista de UsuÃ¡rios (apenas leitura)</h4>
                        <div class="usuarios-actions">
                            <button class="btn btn-success" disabled>â• Adicionar UsuÃ¡rio (via GitHub)</button>
                            <button onclick="atualizarListaUsuarios()" class="btn btn-info">ğŸ”„ Atualizar Lista</button>
                        </div>
                        <div id="listaUsuarios" class="usuarios-table"></div>
                         <p class="upload-hint" style="margin-top: 1rem; text-align: center;">
                            âš ï¸ Para adicionar, editar ou excluir usuÃ¡rios, edite o arquivo **usuarios.csv** diretamente no seu repositÃ³rio GitHub.
                        </p>
                         <p class="upload-hint" style="margin-top: 1rem; text-align: center;">
                            **AVISO DE SEGURANÃ‡A:** NÃ£o use senhas reais em **usuarios.csv** no GitHub, pois o arquivo Ã© pÃºblico.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL ADICIONAR/EDITAR USUÃRIO -->
    <div id="modalUsuario" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitulo">AÃ§Ã£o NÃ£o Suportada</h3>
                <button onclick="fecharModalUsuario()" class="btn-close">âœ–ï¸</button>
            </div>
            <div class="modal-body">
                <p>A adiÃ§Ã£o, ediÃ§Ã£o ou exclusÃ£o de usuÃ¡rios precisa ser feita editando o arquivo <strong>usuarios.csv</strong> diretamente no seu repositÃ³rio GitHub.</p>
                <p>Isso garante que as alteraÃ§Ãµes sejam permanentes e visÃ­veis para todos os usuÃ¡rios.</p>
                 <p class="upload-hint" style="margin-top: 1rem;">
                    **AVISO DE SEGURANÃ‡A:** NÃ£o use senhas reais em **usuarios.csv** no GitHub, pois o arquivo Ã© pÃºblico.
                </p>
            </div>
            <div class="modal-actions">
                <button type="button" onclick="fecharModalUsuario()" class="btn btn-secondary">Fechar</button>
            </div>
        </div>
    </div>

    <!-- BIBLIOTECAS -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
